import{u as P,_ as N}from"./DslvhUg2.js";import{_ as p,o as r,c as s,b as m,w as S,a,t as d,e as B,r as h,F as b,p as k,s as w,n as o,y as I,z as q,B as F,C as V,D as y,d as L,q as $}from"./BgaR825_.js";const z={class:"product-item"},D={class:"product-image-wrapper"},Q=["src"],A={class:"product-category"},M={class:"product-title"},T={class:"product-price"},j={class:"product-rating"},E={__name:"productcard",props:{product:{type:Object,required:!0}},setup(t){return(e,n)=>{const c=B;return r(),s("div",z,[m(c,{to:`/product/${t.product.slug}-${t.product.id}`},{default:S(()=>[a("div",D,[a("img",{src:t.product.image||"https://picsum.photos/250",alt:"Product image",loading:"lazy"},null,8,Q),a("div",A,d(t.product.category),1)]),a("h2",M,d(t.product.title),1),a("div",T,"Price: $"+d(t.product.price),1),a("div",j,"Rating: "+d(t.product.rating),1)]),_:1},8,["to"])])}}},H=p(E,[["__scopeId","data-v-47f5e0c3"]]),O={class:"pagination"},R=["disabled"],U=["disabled"],G={__name:"pagination",props:{currentPage:{type:Number,required:!0},totalPages:{type:Number,required:!0}},emits:["page-change"],setup(t,{emit:e}){const n=e,c=l=>{n("page-change",l)};return(l,u)=>(r(),s("div",O,[a("button",{onClick:u[0]||(u[0]=_=>c(t.currentPage-1)),disabled:t.currentPage<=1},"‹ Previous",8,R),a("span",null,d(t.currentPage)+" / "+d(t.totalPages),1),a("button",{onClick:u[1]||(u[1]=_=>c(t.currentPage+1)),disabled:t.currentPage>=t.totalPages},"Next ›",8,U)]))}},J=p(G,[["__scopeId","data-v-85af1125"]]),K={class:"loading-state"},W={__name:"loader",props:{message:{type:String,default:"Loading..."}},setup(t){return(e,n)=>(r(),s("div",K,[a("p",null,d(t.message),1)]))}},X=p(W,[["__scopeId","data-v-959a13d0"]]),Y={class:"product-filtering"},Z=["onClick"],ee={__name:"productfiltering",props:{categories:{type:Array,required:!0},formatCategoryName:{type:Function,required:!0}},emits:["category-select"],setup(t,{emit:e}){P();const n=e,c=h(null),l=u=>{c.value=u,n("category-select",u)};return(u,_)=>(r(),s("div",Y,[a("ul",null,[(r(!0),s(b,null,k(t.categories,i=>(r(),s("li",{key:i,onClick:v=>l(i),class:w({active:o(c)===i})},d(t.formatCategoryName(i)),11,Z))),128))])]))}},te=p(ee,[["__scopeId","data-v-fa54caab"]]),ae={class:"search-wrapper"},re={__name:"productsearchbar",setup(t){const e=h(""),n=P(),c=()=>{n.filterProducts(e.value)},l=()=>{e.value="",n.filterProducts(""),n.selectedCategory=null};return(u,_)=>(r(),s("div",ae,[I(a("input",{"onUpdate:modelValue":_[0]||(_[0]=i=>e.value=i),onInput:c,placeholder:"Find products","aria-label":""},null,544),[[q,e.value]]),a("button",{onClick:l,class:"update-filtering"},"Clear")]))}},oe=p(re,[["__scopeId","data-v-f0b7ebc6"]]),se={class:"page-content"},ce={class:"container"},ne={key:0},ue={key:1},de={key:2,class:"product-list"},le={key:3,class:"product-list-error"},ie={__name:"products",setup(t){const e=P(),n=h([{name:"Home",to:"/"},{name:"Products",to:"/products"}]),c=h(!0),l=h([]);F(async()=>{await e.fetchAllProducts(),l.value=e.allCategories||[],await e.fetchProducts(1),c.value=!1});const u=g=>{!e.searchQuery&&!e.selectedCategory&&e.fetchProducts(g)},_=g=>{e.filterByCategory(g)},i=g=>{e.filterProducts(g)},v=V(()=>e.allProducts.filter(g=>g.category===e.selectedCategory).length);return(g,f)=>{const x=N;return r(),s("section",se,[a("div",ce,[m(x,{breadcrumbs:n.value},null,8,["breadcrumbs"]),c.value?(r(),s("div",ne,[m(X,{message:"Loading products..."})])):y("",!0),m(te,{categories:o(e).allCategories,onCategorySelect:_,formatCategoryName:o(e).formatCategoryName},null,8,["categories","formatCategoryName"]),m(oe,{onSearch:i}),o(e).selectedCategory?(r(),s("h2",ue,[f[0]||(f[0]=L("Currently showing ")),a("em",null,d(o(e).formatCategoryName(o(e).selectedCategory))+" ("+d(v.value)+")",1)])):y("",!0),o(e).filteredProducts&&o(e).filteredProducts.length?(r(),s("div",de,[(r(!0),s(b,null,k(o(e).filteredProducts,C=>(r(),$(H,{key:C.id,product:C},null,8,["product"]))),128))])):(r(),s("div",le,f[1]||(f[1]=[a("p",null,"No products found for current selection.",-1)]))),!o(e).searchQuery&&!o(e).selectedCategory?(r(),$(J,{key:4,currentPage:o(e).currentPage,totalPages:o(e).totalPages,onPageChange:u},null,8,["currentPage","totalPages"])):y("",!0)])])}}},pe=p(ie,[["__scopeId","data-v-7fa3e491"]]);export{pe as default};
