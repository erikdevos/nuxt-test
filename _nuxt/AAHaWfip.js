import{u as $,_ as S}from"./CrW87cyL.js";import{_ as p,o as r,c as o,b as m,w as B,a as s,t as u,e as w,r as h,F as b,p as k,s as N,n as d,y as I,z as q,B as V,C as F,D as f,d as L,q as C}from"./MnO-mpG0.js";const z={class:"product-item"},D={class:"product-image-wrapper"},Q=["src"],A={class:"product-category"},M={class:"product-title"},T={class:"product-price"},j={class:"product-rating"},E={__name:"productcard",props:{product:{type:Object,required:!0}},setup(t){return(e,c)=>{const a=w;return r(),o("div",z,[m(a,{to:`/product/${t.product.slug}-${t.product.id}`},{default:B(()=>[s("div",D,[s("img",{src:t.product.image||"https://picsum.photos/250",alt:"Product image",loading:"lazy"},null,8,Q),s("div",A,u(t.product.category),1)]),s("h2",M,u(t.product.title),1),s("div",T,"Price: $"+u(t.product.price),1),s("div",j,"Rating: "+u(t.product.rating),1)]),_:1},8,["to"])])}}},H=p(E,[["__scopeId","data-v-47f5e0c3"]]),O={class:"pagination"},R=["disabled"],U=["disabled"],G={__name:"pagination",props:{currentPage:{type:Number,required:!0},totalPages:{type:Number,required:!0}},emits:["page-change"],setup(t,{emit:e}){const c=e,a=l=>{c("page-change",l)};return(l,n)=>(r(),o("div",O,[s("button",{onClick:n[0]||(n[0]=g=>a(t.currentPage-1)),disabled:t.currentPage<=1},"‹ Previous",8,R),s("span",null,u(t.currentPage)+" / "+u(t.totalPages),1),s("button",{onClick:n[1]||(n[1]=g=>a(t.currentPage+1)),disabled:t.currentPage>=t.totalPages},"Next ›",8,U)]))}},J=p(G,[["__scopeId","data-v-85af1125"]]),K={class:"loading-state"},W={__name:"loader",props:{message:{type:String,default:"Loading..."}},setup(t){return(e,c)=>(r(),o("div",K,[s("p",null,u(t.message),1)]))}},X=p(W,[["__scopeId","data-v-959a13d0"]]),Y={class:"product-filtering"},Z=["onClick"],ee={__name:"productfiltering",props:{categories:{type:Array,required:!0}},emits:["category-select"],setup(t,{emit:e}){const c=e,a=h(null),l=n=>{a.value=n,c("category-select",n)};return(n,g)=>(r(),o("div",Y,[s("ul",null,[(r(!0),o(b,null,k(t.categories,i=>(r(),o("li",{key:i,onClick:v=>l(i),class:N({active:d(a)===i})},u(i),11,Z))),128))])]))}},te=p(ee,[["__scopeId","data-v-5eb68e7a"]]),se={class:"search-wrapper"},re={__name:"productsearchbar",setup(t){const e=h(""),c=$(),a=()=>{c.filterProducts(e.value)},l=()=>{e.value="",c.filterProducts(""),c.selectedCategory=null};return(n,g)=>(r(),o("div",se,[I(s("input",{"onUpdate:modelValue":g[0]||(g[0]=i=>e.value=i),onInput:a,placeholder:"Find products","aria-label":""},null,544),[[q,e.value]]),s("button",{onClick:l,class:"update-filtering"},"Clear")]))}},oe=p(re,[["__scopeId","data-v-64390db0"]]),ae={class:"page-content"},ce={class:"container"},ne={key:0},de={key:1},ue={key:2,class:"product-list"},le={key:3,class:"product-list-error"},ie={__name:"products",setup(t){const e=$(),c=h([{name:"Home",to:"/"},{name:"Products",to:"/products"}]),a=h(!0),l=h([]);V(async()=>{await e.fetchAllProducts(),l.value=e.allCategories||[],await e.fetchProducts(1),a.value=!1});const n=_=>{!e.searchQuery&&!e.selectedCategory&&e.fetchProducts(_)},g=_=>{e.filterByCategory(_)},i=_=>{e.filterProducts(_)},v=F(()=>e.allProducts.filter(_=>_.category===e.selectedCategory).length);return(_,P)=>{const x=S;return r(),o("section",ae,[s("div",ce,[m(x,{breadcrumbs:c.value},null,8,["breadcrumbs"]),a.value?(r(),o("div",ne,[m(X,{message:"Loading products..."})])):f("",!0),m(te,{categories:d(e).allCategories,onCategorySelect:g},null,8,["categories"]),m(oe,{onSearch:i}),d(e).selectedCategory?(r(),o("h2",de,[P[0]||(P[0]=L("Currently showing ")),s("em",null,u(d(e).selectedCategory)+" ("+u(v.value)+")",1)])):f("",!0),d(e).filteredProducts&&d(e).filteredProducts.length?(r(),o("div",ue,[(r(!0),o(b,null,k(d(e).filteredProducts,y=>(r(),C(H,{key:y.id,product:y},null,8,["product"]))),128))])):(r(),o("div",le,P[1]||(P[1]=[s("p",null,"No products found for current selection.",-1)]))),!d(e).searchQuery&&!d(e).selectedCategory?(r(),C(J,{key:4,currentPage:d(e).currentPage,totalPages:d(e).totalPages,onPageChange:n},null,8,["currentPage","totalPages"])):f("",!0)])])}}},pe=p(ie,[["__scopeId","data-v-892f2c66"]]);export{pe as default};
